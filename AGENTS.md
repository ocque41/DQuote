# Repository Guidelines

## Project Structure & Module Organization
Source routes live under `src/app/**` using the App Router (e.g., `src/app/(app)/quotes/page.tsx`). Shared UI primitives belong in `src/components/**` and reusable hooks in `src/hooks/**`. Keep server-only logic inside `src/server/**`, domain utilities in `src/lib/**`, auth helpers in `src/auth/**`, and Prisma schema plus migrations inside `prisma/`. Place focused tests next to the code they cover or under `tests/**`; leave assets generated by Prisma within `prisma/migrations/**`.

## Build, Test, and Development Commands
Run the Next.js dev server with `npm run dev`. Build the production bundle—including `prisma generate`—via `npm run build`, then launch it with `npm start`. Check linting and formatting using `npm run lint` and `npm run format`. Apply or create migrations with `npm run migrate:apply` and `npm run migrate:create`, and inspect data using `npx prisma studio`. Execute pricing-focused specs through `npm run test:pricing`.

## Coding Style & Naming Conventions
Write TypeScript/React with 2-space indentation and favor named exports. Use PascalCase for React components, kebab-case for filenames, and keep UI primitives mirrored under `src/components/ui/**` following shadcn patterns. Before committing, run Prettier and Tailwind formatting (`npm run format`) to enforce consistent styling.

## Testing Guidelines
Tests run with tsx-run and should be named `*.test.ts` or `*.spec.tsx`. Prioritize coverage for pricing rules, auth guards, and core data transforms. Place new specs alongside their implementation when practical, or under `tests/**`, and resolve failures before re-running to keep feedback quick.

## Commit & Pull Request Guidelines
Format commit messages as `<type>(<scope>): <imperative summary>`, e.g., `feat(quotes): add bulk select to table`. Pull requests should explain the rationale, link relevant issues, and provide UI screenshots whenever user-facing behavior changes. Ensure Prisma schema edits ship with matching migrations and update `prisma/seed.ts` when expectations for seed data shift.

## Security & Configuration Tips
Copy `.env.example` to `.env`, keep secrets out of version control, and validate API inputs in `src/app/api/**` with `zod`. Isolate side effects within server handlers, respect the workspace sandbox, and avoid destructive commands without explicit approval.
